/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var W=Object.defineProperty;var oe=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var le=Object.prototype.hasOwnProperty;var de=(s,a)=>{for(var e in a)W(s,e,{get:a[e],enumerable:!0})},me=(s,a,e,t)=>{if(a&&typeof a=="object"||typeof a=="function")for(let n of ce(a))!le.call(s,n)&&n!==e&&W(s,n,{get:()=>a[n],enumerable:!(t=oe(a,n))||t.enumerable});return s};var ue=s=>me(W({},"__esModule",{value:!0}),s);var Te={};de(Te,{default:()=>V});module.exports=ue(Te);var M=require("obsidian");var pe={sourceMode:"tag",tagName:"flashcard",folderName:"Flashcards",isBlurFlashcardText:!0,openInPreviewMode:!0};async function j(s){return Object.assign({},pe,await s.loadData())}async function J(s,a){await s.saveData(a)}var x=require("obsidian");var f={CARD_UPDATED:"memmaster:card-updated",CARD_CREATED:"memmaster:card-created",CARD_DELETED:"memmaster:card-deleted",SETTINGS_UPDATED:"memmaster:settings-updated"};var L=class extends x.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this,{i18n:t}=this.plugin;e.empty(),e.createEl("h3",{text:t.t("settings.flashcardSourceHeading")}),new x.Setting(e).setName(t.t("settings.cardSource.name")).setDesc(t.t("settings.cardSource.desc")).addDropdown(n=>n.addOption("tag",t.t("settings.sourceMode.tag")).addOption("folder",t.t("settings.sourceMode.folder")).setValue(this.plugin.settings.sourceMode).onChange(async r=>{this.plugin.settings.sourceMode=r,await this.plugin.saveSettings(),this.display(),this.plugin.events.trigger(f.SETTINGS_UPDATED)})),this.plugin.settings.sourceMode==="tag"&&new x.Setting(e).setName(t.t("settings.tagName.name")).setDesc(t.t("settings.tagName.desc")).addText(n=>n.setPlaceholder(t.t("settings.tagName.placeholder")).setValue(this.plugin.settings.tagName).onChange(async r=>{this.plugin.settings.tagName=r,await this.plugin.saveSettings(),this.plugin.events.trigger(f.SETTINGS_UPDATED)})),this.plugin.settings.sourceMode==="folder"&&new x.Setting(e).setName(t.t("settings.folderName.name")).setDesc(t.t("settings.folderName.desc")).addText(n=>n.setPlaceholder(t.t("settings.folderName.placeholder")).setValue(this.plugin.settings.folderName).onChange(async r=>{this.plugin.settings.folderName=r,await this.plugin.saveSettings(),this.plugin.events.trigger(f.SETTINGS_UPDATED)})),e.createEl("hr"),e.createEl("h3",{text:t.t("settings.reviewListHeading")}),new x.Setting(e).setName(t.t("settings.isBlurFlashcardText.name")).setDesc(t.t("settings.isBlurFlashcardText.desc")).addToggle(n=>n.setValue(this.plugin.settings.isBlurFlashcardText).onChange(async r=>{this.plugin.settings.isBlurFlashcardText=r,await this.plugin.saveSettings(),this.plugin.events.trigger(f.SETTINGS_UPDATED)})),new x.Setting(e).setName(t.t("settings.openInPreviewMode.name")).setDesc(t.t("settings.openInPreviewMode.desc")).addToggle(n=>n.setValue(this.plugin.settings.openInPreviewMode).onChange(async r=>{this.plugin.settings.openInPreviewMode=r,await this.plugin.saveSettings(),this.plugin.events.trigger(f.SETTINGS_UPDATED)})),e.createEl("hr"),e.createEl("h3",{text:t.t("settings.hotkeysHeading")}),e.createEl("p",{text:t.t("settings.hotkeysDesc"),cls:"setting-item-description"})}};var H=require("obsidian");function R(s){return new Promise(a=>setTimeout(a,s))}function I(s,a){let e=a.split("/"),t=s.split("/");for(let n=0;n<=t.length-e.length;n++){let r=!0;for(let i=0;i<e.length;i++)if(t[n+i]!==e[i]){r=!1;break}if(r)return!0}return!1}function he(s,a){let e=a.replace(/^#/,""),n=new RegExp(`(^|\\s)#${e}(\\b|$)`,"i").test(s),r=!1,i=s.match(/^---\n([\s\S]*?)\n---/);if(i){let c=i[1].split(`
`).find(l=>l.trim().toLowerCase().startsWith("tags:"));if(c){let l=c.split(":").slice(1).join(":").trim();r=new RegExp(`\\b${e}\\b`,"i").test(l)}}return n||r}async function S(s,a){var t;if(s.settings.sourceMode==="folder"){let r=((t=s.settings.folderName)!=null?t:"").trim().replace(/^\/+|\/+$/g,"");return r?I(a.path,r):!1}let e=await s.app.vault.cachedRead(a);return he(e,s.settings.tagName)}function ge(s,a){let e=s.match(/^---\n([\s\S]*?)\n---/);if(!e)return null;let t=e[1],n=!1,r=!1,i={nextReview:"",stage:"0",file:a,content:s};return t.split(`
`).forEach(o=>{let c=o.indexOf(":");if(c===-1)return;let l=o.substring(0,c).trim(),m=o.substring(c+1).trim();l==="memmaster-next-review"&&(i.nextReview=m,n=!0),l==="memmaster-stage"&&(i.stage=m,r=!0)}),!n||!r?null:i}function fe(s){if(!s.nextReview)return!0;let a=new Date;a.setHours(0,0,0,0);let e=new Date(s.nextReview);return e.setHours(0,0,0,0),e<=a}function we(s){return s.sort((a,e)=>a.nextReview?e.nextReview?new Date(a.nextReview).getTime()-new Date(e.nextReview).getTime():1:-1)}async function K(s){let a=s.app.vault.getMarkdownFiles(),e=[];for(let t of a)if(await S(s,t)){let r=await s.app.vault.cachedRead(t),i=ge(r,t),o=i!=null?i:{nextReview:"",stage:"0",file:t,content:r};fe(o)&&e.push(o)}return we(e)}var G=class extends H.ItemView{constructor(e,t){super(e);this.searchQuery="";this.sortOrder="oldest-first";this.documentClickHandler=null;this.plugin=t}getViewType(){return G.VIEW_TYPE}getDisplayText(){return this.plugin.i18n.t("reviewList.viewTitle")}async renderContent(){let e=this.contentEl;e.empty();let t=e.createDiv({cls:"mm-search-container"}),n=t.createDiv({cls:"mm-search-wrapper"}),r=n.createEl("span",{cls:"mm-search-icon"});r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
			<circle cx="11" cy="11" r="8"></circle>
			<path d="m21 21-4.35-4.35"></path>
		</svg>`,n.createEl("input",{type:"text",cls:"mm-search-input",placeholder:this.plugin.i18n.t("reviewList.searchPlaceholder"),value:this.searchQuery}).addEventListener("input",u=>{this.searchQuery=u.target.value.toLowerCase(),this.filterCards()});let o=t.createDiv({cls:"mm-sort-wrapper"}),c=o.createEl("label",{cls:"mm-sort-label",text:this.plugin.i18n.t("reviewList.sortLabel")}),l=o.createDiv({cls:"mm-custom-dropdown"}),m=l.createDiv({cls:"mm-dropdown-selected"}),v=m.createEl("span",{cls:"mm-dropdown-selected-text",text:this.sortOrder==="oldest-first"?this.plugin.i18n.t("reviewList.sortOldestFirst"):this.plugin.i18n.t("reviewList.sortNewestFirst")}),w=m.createEl("span",{cls:"mm-dropdown-arrow"});w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>';let g=l.createDiv({cls:"mm-dropdown-options"}),k=l.createDiv({cls:"mm-dropdown-border"});[{value:"oldest-first",text:this.plugin.i18n.t("reviewList.sortOldestFirst")},{value:"newest-first",text:this.plugin.i18n.t("reviewList.sortNewestFirst")}].forEach(u=>{let d=g.createDiv({cls:`mm-dropdown-option ${this.sortOrder===u.value?"mm-dropdown-option-selected":""}`,attr:{"data-value":u.value}});d.setText(u.text),d.addEventListener("click",T=>{T.stopPropagation(),this.sortOrder=u.value,v.setText(u.text),g.querySelectorAll(".mm-dropdown-option").forEach(y=>{y.removeClass("mm-dropdown-option-selected")}),d.addClass("mm-dropdown-option-selected"),l.removeClass("mm-dropdown-open"),this.sortCards()})}),m.addEventListener("click",u=>{u.stopPropagation();let d=!l.hasClass("mm-dropdown-open");l.toggleClass("mm-dropdown-open",d),d&&requestAnimationFrame(()=>{let T=g.offsetHeight;k.style.setProperty("--dropdown-options-height",`${T}px`)})}),this.documentClickHandler&&document.removeEventListener("click",this.documentClickHandler),this.documentClickHandler=()=>{l.removeClass("mm-dropdown-open")},document.addEventListener("click",this.documentClickHandler),m.addEventListener("mousemove",u=>{if(!l.hasClass("mm-dropdown-open")){let d=m.getBoundingClientRect(),T=(u.clientX-d.left)/d.width*100,y=(u.clientY-d.top)/d.height*100;m.style.setProperty("--mouse-x",`${T}%`),m.style.setProperty("--mouse-y",`${y}%`)}}),l.addEventListener("mousemove",u=>{if(l.hasClass("mm-dropdown-open")){let d=m.getBoundingClientRect(),T=g.getBoundingClientRect(),y=d.top,D=d.left,Y=d.right,A=T.bottom,B=Y-D,$=A-y,Q=(u.clientX-D)/B*100,_=(u.clientY-y)/$*100;k.style.setProperty("--mouse-x",`${Q}%`),k.style.setProperty("--mouse-y",`${_}%`)}});let ne=e.createDiv({cls:"mm-card-grid"}),q=await K(this.plugin);if(q.length===0){e.createDiv({cls:"mm-no-flashcards"}).setText(this.plugin.i18n.t("reviewList.noFlashcards"));return}e.createDiv({cls:"mm-no-search-results",attr:{style:"display: none;"}}).setText(this.plugin.i18n.t("reviewList.noSearchResults"));for(let u of q){let d=ne.createDiv({cls:"mm-card"}),T=this.plugin.settings.isBlurFlashcardText?"mm-blur-enabled":"mm-blur-disabled";d.classList.add(T),d.setAttribute("data-filename",u.file.basename.toLowerCase()),d.setAttribute("data-content",u.content.toLowerCase());let y=0;if(u.nextReview){let h=new Date(u.nextReview);y=Math.floor((new Date().getTime()-h.getTime())/(1e3*60*60*24))}d.setAttribute("data-overdue-days",y.toString());let D=d.createDiv({cls:"mm-card-header"});D.createEl("h4",{text:u.file.basename}),u.nextReview&&D.createEl("span",{cls:"mm-review-info",text:y>0?this.plugin.i18n.t("reviewList.overdueByDays",{days:y.toString()}):this.plugin.i18n.t("reviewList.dueToday")});let A=u.content.split(`
`).filter(h=>{let p=h.trim();return/^#+\s/.test(p)?!1:h.includes("#")}),B=A.map(h=>h.split(/\s+/).filter(p=>p.startsWith("#")&&p.length>1&&p[1]!=="#").map(p=>`<p>${p}</p>`).join(" ")).join(" "),$=A.flatMap(h=>h.split(/\s+/).filter(p=>p.startsWith("#")&&p.length>1&&p[1]!=="#")).join(" ").toLowerCase();d.setAttribute("data-tags",$);let _=u.content.replace(/^---[\s\S]*?---/,"").replace(/#[^\s#]+/g,"").replace(/\n+/g," ").trim().slice(0,128),re=`<div class="mm-card-tags">${B}</div><p class="mm-card-text">${_}</p>`,X=d.createDiv();X.className="mm-card-content",X.innerHTML=re;let ie=d.createEl("span",{cls:"mm-open-card-button"});ie.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
            </svg>`,d.addEventListener("click",async()=>{await this.app.workspace.openLinkText(u.file.path,"/",!1),this.plugin.settings.openInPreviewMode&&setTimeout(async()=>{var p;let h=this.app.workspace.getActiveViewOfType(H.MarkdownView);if(h&&((p=h.file)==null?void 0:p.path)===u.file.path){let P=this.app.workspace.getLeavesOfType("markdown").find(U=>U.view===h);if(P){let U=P.getViewState();await P.setViewState({type:"markdown",state:{...U.state,mode:"preview"}})}}},100)}),d.addEventListener("mousemove",h=>{let p=d.getBoundingClientRect(),z=(h.clientX-p.left)/p.width*100,P=(h.clientY-p.top)/p.height*100;d.style.setProperty("--mouse-x",`${z}%`),d.style.setProperty("--mouse-y",`${P}%`)})}this.searchQuery&&this.filterCards(),this.sortCards()}filterCards(){let e=this.contentEl.querySelectorAll(".mm-card"),t=this.contentEl.querySelector(".mm-no-search-results"),n=this.searchQuery,r=!1;e.forEach(i=>{let o=i.getAttribute("data-filename")||"",c=i.getAttribute("data-content")||"",l=i.getAttribute("data-tags")||"";o.includes(n)||c.includes(n)||l.includes(n)?(i.style.display="",r=!0):i.style.display="none"}),t&&(!r&&n.length>0?t.style.display="block":t.style.display="none")}sortCards(){let e=this.contentEl.querySelector(".mm-card-grid");if(!e)return;let t=Array.from(e.querySelectorAll(".mm-card"));t.sort((n,r)=>{let i=parseInt(n.getAttribute("data-overdue-days")||"0"),o=parseInt(r.getAttribute("data-overdue-days")||"0");return this.sortOrder==="oldest-first"?o-i:i-o}),t.forEach(n=>e.appendChild(n))}async onOpen(){this.containerEl.addClass("mm-view"),await this.renderContent(),this.registerEvent(this.app.workspace.on("active-leaf-change",e=>{(e==null?void 0:e.view)===this&&this.renderContent()})),this.registerEvent(this.plugin.events.on(f.CARD_UPDATED,()=>{this.renderContent()})),this.registerEvent(this.plugin.events.on(f.SETTINGS_UPDATED,()=>{this.renderContent()}))}async onClose(){this.documentClickHandler&&(document.removeEventListener("click",this.documentClickHandler),this.documentClickHandler=null),this.containerEl.empty()}},E=G;E.VIEW_TYPE="review-list-view";var C=require("obsidian");function Z(s){let a=s.match(/^---\n([\s\S]*?)\n---/),e=a?a[1]:"",t=a?s.replace(a[0],"").trim():s,n={};return e.split(`
`).forEach(r=>{let i=r.indexOf(":");if(i!==-1){let o=r.substring(0,i).trim(),c=r.substring(i+1).trim();o&&c&&(n[o]=c)}}),{metadata:n,body:t}}async function b(s,a,e){let t=await s.app.vault.read(a),{metadata:n,body:r}=Z(t),i=new Date,o,c=parseInt(n["memmaster-stage"]||"0");if(e==="easy"?(o=Math.pow(2,c),c++):e==="medium"?(o=Math.pow(1.5,c),c++):e==="hard"?(o=Math.max(1,Math.floor(Math.pow(1.2,c))),c++):(o=1,c++),c>10){await s.app.vault.modify(a,r),new C.Notice(s.i18n.t("notices.cardMastered")),s.events.trigger(f.CARD_UPDATED);return}let l=new Date(i.getTime()+o*24*60*60*1e3);n["memmaster-next-review"]=l.toISOString().split("T")[0],n["memmaster-stage"]=c.toString();let m=`---
`+Object.entries(n).map(([v,w])=>`${v}: ${w}`).join(`
`)+`
---
`;await s.app.vault.modify(a,m+`
`+r),new C.Notice(s.i18n.t("notices.cardUpdated",{date:n["memmaster-next-review"]})),s.events.trigger(f.CARD_UPDATED)}async function ee(s,a){let e=await s.app.vault.read(a),{metadata:t,body:n}=Z(e),r=new Date;if(t["memmaster-next-review"]=r.toISOString().split("T")[0],t["memmaster-stage"]="0",s.settings.sourceMode==="tag"){let i=s.settings.tagName||"flashcard",o=i.startsWith("#")?i:`#${i}`;if(new RegExp(`(^|\\s)${o.replace("#","\\#")}(\\b|$)`,"i").test(e))return new C.Notice(s.i18n.t("notices.alreadyFlashcard")),!1;let l=!1;if(t.tags&&t.tags.includes(i)&&(l=!0),l)return new C.Notice(s.i18n.t("notices.alreadyFlashcard")),!1;let m=n.replace(/^\n+/,"").replace(/\n+$/,"");m.length>0?m=o+`

`+m:m=o+`
`;let v=`---
`+Object.entries(t).map(([w,g])=>`${w}: ${g}`).join(`
`)+`
---`;return await s.app.vault.modify(a,v+`
`+m),new C.Notice(s.i18n.t("notices.flashcardCreated")+" - "+s.i18n.t("notices.tagAdded",{tag:o})),s.events.trigger(f.CARD_UPDATED),!0}else if(s.settings.sourceMode==="folder"){let o=(s.settings.folderName||"Flashcards").trim().replace(/^\/+|\/+$/g,"");if(I(a.path,o))return new C.Notice(s.i18n.t("notices.alreadyFlashcard")),!1;s.app.vault.getAbstractFileByPath(o)||await s.app.vault.createFolder(o);let l=`${o}/${a.name}`,m=`---
`+Object.entries(t).map(([v,w])=>`${v}: ${w}`).join(`
`)+`
---
`;return await s.app.vault.modify(a,m+`
`+n),await s.app.fileManager.renameFile(a,l),new C.Notice(s.i18n.t("notices.flashcardCreated")+" - "+s.i18n.t("notices.movedToFolder",{folder:o})),s.events.trigger(f.CARD_UPDATED),!0}return!1}function ve(s,a){let e=document.createElement("div");e.className="mm-estimation-card-buttons-container";let t=document.createElement("p");t.className="mm-estimation-card-text",t.textContent=a.i18n.t("reviewFlashcard.difficultyQuestion");let n=document.createElement("div");n.className="mm-estimation-card-buttons-block";let r=document.createElement("button");r.className="mm-estimation-card-button mm-easy-button",r.textContent=a.i18n.t("reviewFlashcard.easy"),r.addEventListener("click",async c=>{c.preventDefault(),c.stopPropagation(),await b(a,s,"easy")});let i=document.createElement("button");i.className="mm-estimation-card-button mm-medium-button",i.textContent=a.i18n.t("reviewFlashcard.medium"),i.addEventListener("click",async c=>{c.preventDefault(),c.stopPropagation(),await b(a,s,"medium")});let o=document.createElement("button");return o.className="mm-estimation-card-button mm-hard-button",o.textContent=a.i18n.t("reviewFlashcard.hard"),o.addEventListener("click",async c=>{c.preventDefault(),c.stopPropagation(),await b(a,s,"hard")}),n.appendChild(r),n.appendChild(i),n.appendChild(o),e.appendChild(t),e.appendChild(n),e.addEventListener("mousemove",c=>{let l=e.getBoundingClientRect(),m=(c.clientX-l.left)/l.width*100,v=(c.clientY-l.top)/l.height*100;e.style.setProperty("--mouse-x",`${m}%`),e.style.setProperty("--mouse-y",`${v}%`)}),e}async function N(s,a,e={}){var m,v;let{delay:t=0,cleanupMisplaced:n=!0,removeIfNoTag:r=!0}=e;if(t>0&&await R(t),!s.file)return;if(!await S(a,s.file)){r&&document.querySelectorAll(".mm-estimation-card-buttons-container").forEach(g=>g.remove());return}let c=((v=(m=s.previewMode)==null?void 0:m.containerEl)!=null?v:s.containerEl).querySelectorAll(".markdown-preview-section"),l=s.file;c.forEach(w=>{let g=w.querySelector(".mm-estimation-card-buttons-container");if(n&&g&&g.parentElement!==w&&(g.remove(),g=null),!g){let k=ve(l,a);w.appendChild(k)}})}var ae=require("obsidian");var te={ribbonIcon:{openReviewFlashcards:"Open repetition flashcards"},commands:{openReviewListView:"Open Review List View",markAsEasy:"Mark current card as Easy",markAsMedium:"Mark current card as Medium",markAsHard:"Mark current card as Hard",makeFlashcard:"Make current document a flashcard"},settings:{flashcardSourceHeading:"Flashcard source settings",cardSource:{name:"Card source",desc:"Choose how to find flashcards for review: by tag or by folder location"},tagName:{name:"Tag name",desc:"Enter the tag name to use",placeholder:"#flashcard"},folderName:{name:"Folder name",desc:"Enter the folder path to use",placeholder:"Flashcards"},reviewListHeading:"Review list settings",isBlurFlashcardText:{name:"Blur flashcard text",desc:"Blur flashcard content in review list until mouse hover"},openInPreviewMode:{name:"Open cards in reading mode",desc:"Open flashcards from review list in reading mode (preview). Important: enabling this setting is required for review buttons to appear on cards."},hotkeysHeading:"Hotkeys settings",hotkeysDesc:"Configure keyboard shortcuts for quick card review. Set hotkeys in Settings > Hotkeys > MemMaster.",sourceMode:{tag:"Tag",folder:"Folder"}},reviewFlashcard:{difficultyQuestion:"How difficult was this card?",easy:"Easy",medium:"Medium",hard:"Hard"},reviewList:{viewTitle:"Repetition flashcards",searchPlaceholder:"Search flashcards...",noFlashcards:"No flashcards due for review.",noSearchResults:"No flashcards found matching your search.",overdueByDays:"Overdue by {{days}} days",dueToday:"Due today",sortLabel:"Sort:",sortOldestFirst:"Most overdue first",sortNewestFirst:"Least overdue first"},notices:{notAFlashcard:"This document is not a flashcard",noActiveFile:"No active file",flashcardCreated:"Document marked as flashcard",tagAdded:"Tag added: {{tag}}",movedToFolder:"Moved to folder: {{folder}}",alreadyFlashcard:"This document is already a flashcard",cardMastered:"Card mastered! Metadata cleared.",cardUpdated:"Updated card: next review on {{date}}"}};var se={ribbonIcon:{openReviewFlashcards:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0434\u043B\u044F \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u044F"},commands:{openReviewListView:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u0434\u043B\u044F \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u044F",markAsEasy:"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 \u043A\u0430\u043A \u041B\u0435\u0433\u043A\u0430\u044F",markAsMedium:"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 \u043A\u0430\u043A \u0421\u0440\u0435\u0434\u043D\u044F\u044F",markAsHard:"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 \u043A\u0430\u043A \u0421\u043B\u043E\u0436\u043D\u0430\u044F",makeFlashcard:"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0438\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u043E\u0439"},settings:{flashcardSourceHeading:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0438\u0441\u0442\u043E\u0447\u043D\u0438\u043A\u0430 \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A",cardSource:{name:"\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A",desc:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043F\u043E\u0441\u043E\u0431 \u043F\u043E\u0438\u0441\u043A\u0430 \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A \u0434\u043B\u044F \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u044F: \u043F\u043E \u0442\u0435\u0433\u0443 \u0438\u043B\u0438 \u043F\u043E \u043F\u0430\u043F\u043A\u0435"},tagName:{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u0433\u0430",desc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u0433\u0430 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F",placeholder:"#\u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430"},folderName:{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438",desc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F",placeholder:"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0438"},reviewListHeading:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u043F\u0438\u0441\u043A\u0430 \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u0439",isBlurFlashcardText:{name:"\u0420\u0430\u0437\u043C\u044B\u0442\u044C \u0442\u0435\u043A\u0441\u0442 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438",desc:"\u0420\u0430\u0437\u043C\u044B\u0432\u0430\u0442\u044C \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0432 \u0441\u043F\u0438\u0441\u043A\u0435 \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u0439 \u0434\u043E \u043D\u0430\u0432\u0435\u0434\u0435\u043D\u0438\u044F \u043C\u044B\u0448\u0438"},openInPreviewMode:{name:"\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0432 \u0440\u0435\u0436\u0438\u043C\u0435 \u0447\u0442\u0435\u043D\u0438\u044F",desc:"\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430 \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u0439 \u0432 \u0440\u0435\u0436\u0438\u043C\u0435 \u0447\u0442\u0435\u043D\u0438\u044F (preview). \u0412\u0430\u0436\u043D\u043E: \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u044D\u0442\u043E\u0439 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0434\u043B\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u044F \u043D\u0430 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430\u0445."},hotkeysHeading:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0433\u043E\u0440\u044F\u0447\u0438\u0445 \u043A\u043B\u0430\u0432\u0438\u0448",hotkeysDesc:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u0442\u0435 \u0441\u043E\u0447\u0435\u0442\u0430\u043D\u0438\u044F \u043A\u043B\u0430\u0432\u0438\u0448 \u0434\u043B\u044F \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A. \u041D\u0430\u0437\u043D\u0430\u0447\u044C\u0442\u0435 \u0433\u043E\u0440\u044F\u0447\u0438\u0435 \u043A\u043B\u0430\u0432\u0438\u0448\u0438 \u0432 \u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 > \u0413\u043E\u0440\u044F\u0447\u0438\u0435 \u043A\u043B\u0430\u0432\u0438\u0448\u0438 > MemMaster.",sourceMode:{tag:"\u0422\u0435\u0433",folder:"\u041F\u0430\u043F\u043A\u0430"}},reviewFlashcard:{difficultyQuestion:"\u041D\u0430\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0441\u043B\u043E\u0436\u043D\u043E\u0439 \u0431\u044B\u043B\u0430 \u044D\u0442\u0430 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430?",easy:"\u041B\u0435\u0433\u043A\u043E",medium:"\u0421\u0440\u0435\u0434\u043D\u0435",hard:"\u0421\u043B\u043E\u0436\u043D\u043E"},reviewList:{viewTitle:"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0434\u043B\u044F \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u044F",searchPlaceholder:"\u041F\u043E\u0438\u0441\u043A \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A...",noFlashcards:"\u041D\u0435\u0442 \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A \u0434\u043B\u044F \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u044F.",noSearchResults:"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B.",overdueByDays:"\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043E \u043D\u0430 {{days}} \u0434\u043D.",dueToday:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",sortLabel:"\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0430:",sortOldestFirst:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0441\u0430\u043C\u044B\u0435 \u043F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043D\u044B\u0435",sortNewestFirst:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u0430\u0438\u043C\u0435\u043D\u0435\u0435 \u043F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043D\u044B\u0435"},notices:{notAFlashcard:"\u042D\u0442\u043E\u0442 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u043E\u0439",noActiveFile:"\u041D\u0435\u0442 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430",flashcardCreated:"\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u043E\u0442\u043C\u0435\u0447\u0435\u043D \u043A\u0430\u043A \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430",tagAdded:"\u0422\u0435\u0433 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D: {{tag}}",movedToFolder:"\u041F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u043E \u0432 \u043F\u0430\u043F\u043A\u0443: {{folder}}",alreadyFlashcard:"\u042D\u0442\u043E\u0442 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u0443\u0436\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u043E\u0439",cardMastered:"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0430 \u043E\u0441\u0432\u043E\u0435\u043D\u0430! \u041C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0435 \u043E\u0447\u0438\u0449\u0435\u043D\u044B.",cardUpdated:"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430: \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u0435 {{date}}"}};var F={en:te,ru:se},O=class{constructor(a){this.locale=this.getObsidianLocale(a),this.translations=F[this.locale]||F.en}getObsidianLocale(a){return ae.moment.locale().startsWith("ru")?"ru":a&&a in F?a:"en"}t(a,e){let t=a.split("."),n=this.translations;for(let r of t)if(n&&typeof n=="object"&&r in n)n=n[r];else return console.warn(`Translation key not found: ${a}`),a;return typeof n!="string"?(console.warn(`Translation value is not a string: ${a}`),a):e?this.interpolate(n,e):n}interpolate(a,e){return a.replace(/\{\{(\w+)\}\}/g,(t,n)=>n in e?String(e[n]):t)}getLocale(){return this.locale}setLocale(a){a in F?(this.locale=a,this.translations=F[a]):(console.warn(`Locale not supported: ${a}, falling back to 'en'`),this.locale="en",this.translations=F.en)}};var V=class extends M.Plugin{async onload(){this.i18n=new O,this.events=new M.Events,this.settings=await j(this),this.observer=new MutationObserver(e=>{let t=this.app.workspace.getActiveViewOfType(M.MarkdownView);t&&N(t,this,{cleanupMisplaced:!0,removeIfNoTag:!0})}),this.registerEvent(this.app.workspace.on("active-leaf-change",async e=>{var t;if(e&&e.view instanceof M.MarkdownView){this.observer.disconnect(),await R(100),await N(e.view,this,{cleanupMisplaced:!0,removeIfNoTag:!0});let n=(t=e.view.previewMode)==null?void 0:t.containerEl;n&&this.observer.observe(n,{childList:!0,subtree:!0})}})),this.registerEvent(this.app.workspace.on("resize",async()=>{let e=this.app.workspace.getActiveViewOfType(M.MarkdownView);e&&await N(e,this,{delay:100,cleanupMisplaced:!1,removeIfNoTag:!1})})),this.registerEvent(this.app.workspace.on("layout-change",async()=>{let e=this.app.workspace.getActiveViewOfType(M.MarkdownView);e&&await N(e,this,{delay:100,cleanupMisplaced:!1,removeIfNoTag:!1})})),this.addRibbonIcon("square-library",this.i18n.t("ribbonIcon.openReviewFlashcards"),()=>{this.activateView()}),this.registerView(E.VIEW_TYPE,e=>new E(e,this)),this.addCommand({id:"open-review-list-view",name:this.i18n.t("commands.openReviewListView"),callback:()=>{this.activateView()}}),this.addCommand({id:"mark-card-easy",name:this.i18n.t("commands.markAsEasy"),checkCallback:e=>{let t=this.app.workspace.getActiveFile();return t?(e||this.markCardWithDifficulty(t,"easy"),!0):!1}}),this.addCommand({id:"mark-card-medium",name:this.i18n.t("commands.markAsMedium"),checkCallback:e=>{let t=this.app.workspace.getActiveFile();return t?(e||this.markCardWithDifficulty(t,"medium"),!0):!1}}),this.addCommand({id:"mark-card-hard",name:this.i18n.t("commands.markAsHard"),checkCallback:e=>{let t=this.app.workspace.getActiveFile();return t?(e||this.markCardWithDifficulty(t,"hard"),!0):!1}}),this.addCommand({id:"make-flashcard",name:this.i18n.t("commands.makeFlashcard"),checkCallback:e=>{let t=this.app.workspace.getActiveFile();return t?(e||this.makeDocumentFlashcard(t),!0):!1}}),this.addSettingTab(new L(this.app,this))}onunload(){this.observer.disconnect(),this.app.workspace.detachLeavesOfType(E.VIEW_TYPE)}async activateView(){let e=this.app.workspace.getLeaf(!0);await e.setViewState({type:E.VIEW_TYPE,active:!0}),this.app.workspace.revealLeaf(e)}async loadSettings(){this.settings=await j(this)}async saveSettings(){await J(this,this.settings)}async markCardWithDifficulty(e,t){if(!await S(this,e)){new M.Notice(this.i18n.t("notices.notAFlashcard"));return}await b(this,e,t)}async makeDocumentFlashcard(e){await ee(this,e)}};
